<!DOCTYPE html>
<html lang="it">
	<head>
		<title> Profilo </title>
		<meta charset="UTF-8">

		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
		<link rel=stylesheet href="main_styles.css" type="text/css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
    	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    	<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
		
	</head>
	
<body class="text-center" >

	<div class="grid-main-container">

		<div class="box-header">
			<div class="box-header-left">{
				<a href="accesso.html" class="logo">BeeTeam</a>
			</div>
			<div class="box-header-center">
				<a href="accesso.html" class="image-logo">
					<img alt="Qries" src="Logoproject.png" width="65" height="65">
				</a>
			</div>
			<div class="box-header-right">
			  <a href="bacheca.html">Bacheca</a>
			  <a class="active" href="profilo.html">Profilo</a>
			</div>
		</div>

		<div class="box-main-profile">
			<div class="box-profile">
				<table width="100%" height="100%">
					<tr>
						<td width="30%" valign="middle" align="center"> 
							Foto Profilo
							<br>
						   <img src="nofoto.jpg" name="FotoUtente" width="60%" class="border-1 rounded ;">
							<br>
							<button class="btn btn-light" onclick="edit()">Edit</button>

			
						</td>
			
						<td> 
							<div class="table" width="100%">
							   <div class="row-mb-4" id="nprof" > Nome </div>  
							   <div class="row-mb-4" id="cprof">Cognome</div>
							   <div class="row-mb-4" id="userprofil"> Username </div>
							   <div class="row-mb-4" id="numprof">Numero di telefono</div>
							   <div class="row-mb-4" id="eprof">Email</div>
						   </div>
						</td>
					</tr>
			   </table>
			</div>

			<div class="box-post">
				<div class="box-post-header">
					<table width="100%" height="100%">
						<tr>
							<td>
								<h1>Creati</h1>
							</td>
							<td>
								<h1>Aderiti</h1>
							</td>
						<tr>
					</table>
				</div>

				<div class="box-post-content-left">

				</div>

				<div class="box-post-content-right">

				</div>
			</div>
		</div>
		<button type="submit" id="logout" href="">Logout</button>
	</div>
	
	<script>

		let nprof=document.getElementById("nprof");
		let cprof=document.getElementById("cprof");
		let userprof=document.getElementById("userprofil");
		let numprof=document.getElementById("numprof");
		let eprof=document.getElementById("eprof");

		const out=document.getElementById("logout");
		var CurrentUser=null;

		function getUser(){
			let keepLog=localStorage.getItem('KeepLog');

			if(keepLog == "yes"){
				CurrentUser=JSON.parse(localStorage.getItem('user'));
			}
			else{
				CurrentUser=JSON.parse(sessionStorage.getItem('user'));
			}
		}

		function signOut(){
			sessionStorage.removeItem('user');
			localStorage.removeItem('user');
			localStorage.removeItem('KeepLog');
			window.location="accesso.html";

		}

		window.onload=function() {
			getUser();
			if(CurrentUser==null){
				alert("Non hai effettuato l'accesso!");
				window.location="accesso.html";

			}
			else{
				nprof.innerText= CurrentUser.nome;
				nprof.style="color: white";
				cprof.innerText= CurrentUser.cognome;
				cprof.style="color: white";
				userprof.innerText= CurrentUser.user;
				userprof.style="color: white";
				numprof.innerText= CurrentUser.numero;
				numprof.style="color: white";
				eprof.innerText= CurrentUser.email;
				eprof.style="color: white";

			}
		}
		  
		
		out.addEventListener('click',signOut);
	</script>
</body>
</html>
